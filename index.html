<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />

    <title>Idle Whale Prototype</title>
    <meta name="description" content="The Idle Whale Prototype" />
    <meta name="author" content="Nyan Cat" />

    <link rel="stylesheet" href="stylesheets/main.css">

    <script src="js/libs/break_eternity.min.js"></script> <!-- Download manually from https://raw.githubusercontent.com/Patashu/break_eternity.js/master/break_eternity.min.js -->
    <script src="js/libs/lodash.min.js"></script> <!-- Download manually from https://raw.githubusercontent.com/lodash/lodash/4.17.15-npm/lodash.min.js-->

    <script>
      function sleep(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
      }

      document.addEventListener("DOMContentLoaded", async function() {
        const loadList = [
          // DO NOT TOUCH THESE LINES
          "js/libs/clipboard.js",
          "js/libs/dom.js",
          "js/libs/format.js",
          "js/libs/saving.js",
          "js/libs/helper.js",

          "js/task/task.js",
          "js/task/drowningTask.js",
          "js/task/drowningTasks/intro.js",
          "js/task/gameTask.js",

          "js/lore.js",

          "js/main.js"
        ]
        const cacheBust = (new Date()).getTime()
        for (let file of loadList) {
          var script = document.createElement("script")
          script.src = file + "?v=" + cacheBust
          document.body.appendChild(script)
          await sleep(50)
        }

        await sleep(200)
        startGame()
      });
    </script>
  </head>
  
  <body>
    <div id="drowning"></div>
    <div id="gameTask"></div>
    <br>
    <div id="lore"></div>
  </body>
</html>